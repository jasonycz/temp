window.define("pages/storelist/storelist",function(t,e,a,o,s,i,r,n,d,l,u,g,c,h,p,m){"use strict";var w=t("../../network/api"),y=function(t){return t&&t.__esModule?t:{default:t}}(w);Page({data:{storelist:[],query:{pageSize:20,pageNo:1},storetype:""},onLoad:function(){var t=i().globalData.editionType,e=i().getFlash("brand");console.log(e);var a=e.id;this.setData({brand:e,storetype:t,query:Object.assign({},this.data.query,{brandId:a})}),s.showLoading({title:"加载中"}),this.queryStoreList(this.data.query)},makestore:function(t){console.log(t.currentTarget.dataset.store,")((((((((((((((()))))))))))))))"),s.redirectTo({url:"/pages/shop/products/products?storeid="+t.currentTarget.dataset.store.id})},queryStoreList:function(t,e){var a=this;y.default.getStoreListByLocation(t).then(function(t){s.hideLoading(),a.setData({storelist:e?t.data.data:a.data.storelist.concat(t.data.data),isShow:!0,loadmore:t.data.nextCursor>0,loadingmore:!1,query:Object.assign({},a.data.query,{pageNo:t.data.nextCursor,pageSize:t.data.pageSize})}),console.log(t,"++++++++++++")}).catch(function(t){return console.log(t)})},lower:function(t){console.log(this.data.loadmore,!this.data.loadingmore,"+++++++++++++++++"),this.data.loadmore&&!this.data.loadingmore&&(console.log(t),this.setData({loadingmore:!0}),this.queryStoreList(this.data.query,!1))},makePhone:function(t){var e=this;console.log(t.target.dataset),t.target.dataset.phone?s.makePhoneCall({phoneNumber:t.target.dataset.phone}):(this.setData({$toast:{show:!0}}),setTimeout(function(){e.setData({$toast:{show:!1}})},1500))}})}),window.__swanRoute="pages/storelist/storelist",window.usingComponents=["dist/minui/wxc-label/dist/index","dist/minui/wxc-toast/dist/index"],require("pages/storelist/storelist");