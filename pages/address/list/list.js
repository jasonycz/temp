window.define("pages/address/list/list",function(e,t,r,a,s,o,d,i,n,f,u,l,c,g,p,h){"use strict";function w(e){return e&&e.__esModule?e:{default:e}}var y=e("../../../network/api"),m=w(y),D=e("../../../utils/util"),T=w(D),v=e("../../../dist/index"),L=w(v);Page(Object.assign({},L.default.Toast,{data:{list:[]},onLoad:function(e){if(s.showLoading({title:"请稍后"}),e.scoreorder){var t=T.default.parse(e.scoreorder);"order"==e.type&&this.setData({type:e.type}),this.setData({scoreorder:t,formData:T.default.parse(e.formData)})}},onReady:function(){},onShow:function(){this.data.scoreorder,this.queryAddressList({pageSize:999,pageNo:1})},makenew:function(){if(this.data.scoreorder){var e=this.data.scoreorder;"order"==this.data.type?s.redirectTo({url:"/pages/address/new/new?type=new&scoreorder="+T.default.stringify(e)+"&formData="+T.default.stringify(this.data.formData)+"&ordertype=order"}):s.redirectTo({url:"/pages/address/new/new?type=new&scoreorder="+T.default.stringify(e)+"&formData="+T.default.stringify(this.data.formData)})}else s.navigateTo({url:"/pages/address/new/new?type=new"})},makeorder:function(e){if(this.data.scoreorder){var t=e.currentTarget.dataset.address;console.log(t,"++++++++++++++");var r=this.data.scoreorder;r.consignee=t,this.data.type?(console.log(r,"scoreorder"),s.redirectTo({url:"/pages/orders/new/new?from=address&order="+T.default.stringify(r)+"&formData="+T.default.stringify(this.data.formData)})):s.redirectTo({url:"/pages/mine/scores/score_new_order?from=address&scoreorder="+T.default.stringify(r)+"&formData="+T.default.stringify(this.data.formData)})}},queryAddressList:function(){var e=this;m.default.queryAddressList({pageSize:999,pageNo:1,gpsType:"all"}).then(function(t){s.stopPullDownRefresh(),s.hideLoading(),console.log("bingooooooooooooo",t),e.setData({list:t.data.data,isShow:!0})}).catch(function(e){return console.log(e)})},editaddress:function(e){var t=e.currentTarget.dataset.item;if(this.data.scoreorder){var r=this.data.scoreorder;"order"==this.data.type?s.redirectTo({url:"/pages/address/new/new?type=edit&scoreorder="+T.default.stringify(r)+"&item="+T.default.stringify(t)+"&formData="+T.default.stringify(this.data.formData)+"&ordertype=order"}):s.redirectTo({url:"/pages/address/new/new?type=edit&scoreorder="+T.default.stringify(r)+"&item="+T.default.stringify(t)+"&formData="+T.default.stringify(this.data.formData)})}else s.navigateTo({url:"/pages/address/new/new?type=edit&item="+T.default.stringify(t)})},deleteaddress:function(e){var t=this;s.showModal({title:"确定要删除该地址吗",success:function(r){if(r.confirm){console.log(e.currentTarget.dataset,"e");var a=e.currentTarget.dataset.item.id;m.default.deleteAddress({id:a}).then(function(){if(t.showToast("地址删除成功"),s.showLoading({title:"请稍后"}),t.data.order){var e=t.data.goodsId;t.queryorderList({goodsId:e,pageSize:999,pageNo:1})}else t.data.scoreorder,t.queryAddressList({pageSize:999,pageNo:1})}).catch(function(){t.showToast("地址删除失败")})}}})},showToast:function(e){this.showZanToast(e)}}))}),window.__swanRoute="pages/address/list/list",window.usingComponents=[],require("pages/address/list/list");