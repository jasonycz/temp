window.define("pages/brandmap/brandmap",function(a,t,e,n,i,o,r,s,d,l,u,m,h,c,g,p){"use strict";var f=a("../../network/api"),k=function(a){return a&&a.__esModule?a:{default:a}}(f);Page({data:{height:100,isShow:!1,showDialog:!1},onLoad:function(a){var t=this;console.log(a);var e={brandId:a.id,flag:1,pageNo:1,pageSize:999};i.showLoading({title:"加载中"}),k.default.getStoreListByLocation(e).then(function(a){console.log(a.data.data,"++++"),i.hideLoading();var e=a.data.data.filter(function(a){return a.lat&&a.lng}).map(function(a){return{iconPath:"/images/tab/marker.png",width:30,height:45,id:a.id,areaNum:a.areaNum,latitude:a.lat,longitude:a.lng,title:a.storeName,openTimeJson:a.openTimeJson,tel:a.tel,detailAddress:""+a.detailAddress,brandName:a.brandName}});t.setData({markers:e,firstMaker:e[0],includePoints:e,isShow:!0})}).catch(function(a){return console.log(a)})},onReady:function(){this.setData({markers:this.data.markers,includePoints:this.data.includePoints,firstMaker:this.data.firstMaker})},markertap:function(a){var t=this;console.log("markertap",a),this.data.markers.map(function(e){e.id==a.markerId&&t.setData({store:e})});var e=83-4*this.data.store.openTimeJson.length;this.setData({showDialog:!0,height:e})},createmap:function(){var a=this.data.store;i.openLocation({name:a.title,address:a.detailAddress,latitude:parseFloat(a.latitude),longitude:parseFloat(a.longitude),success:function(a){console.log(a)}})},makephone:function(){var a=this.data.store,t=a.tel,e=a.areaNum,n=void 0===e?"":e;i.makePhoneCall({phoneNumber:""+n+t})}})}),window.__swanRoute="pages/brandmap/brandmap",window.usingComponents=[],require("pages/brandmap/brandmap");