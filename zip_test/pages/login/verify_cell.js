window.define("pages/login/verify_cell",function(o,t,i,n,e,a,s,l,u,d,c,f,r,h,g,v){"use strict";function w(o){return o&&o.__esModule?o:{default:o}}var p=o("../../utils/util"),m=(w(p),o("../../network/api")),b=w(m),y=o("../../utils/const.js"),D=(w(y),o("../../utils/notification.js")),C=(w(D),o("../../dist/index"));Page(Object.assign({},C.TopTips,{data:{loading:!1,verify:!1,count:60,countDown:!1},onLoad:function(o){var t=o.mobile,i=o.fomatMobile;this.setData({mobile:t,fomatMobile:i})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},getCode:function(o){var t=this;if(console.log(this.data.mobile),!this.data.loading&&!this.data.countDown){e.showLoading({title:"请稍候"}),this.setData({loading:!0,countDown:!0});var i=this,n={mobile:this.data.mobile};b.default.getVerifyCode(n).then(function(o){e.hideLoading(),t.setData({loading:!1}),e.stopPullDownRefresh(),o.data.result?i.setCount():t.showZanTopTips("获取验证码失败")}).catch(function(o){console.log(o),e.hideLoading(),t.setData({loading:!1})})}},setCount:function(){var o=this.data,t=o.count,i=o.mobile,n=this;if(0==t)return void this.setData({verify:!0,mobile:i,count:60,countDown:!1});var e=t-1;this.setData({count:e}),setTimeout(function(){n.setCount()},1e3)},formSubmit:function(o){var t=this;console.log(o.detail.value);var i=o.detail.value,n=void 0;if(!i.verifyCode||0==i.verifyCode.trim().length)return n="验证码不能为空",void this.showZanTopTips(n);b.default.checkVerifyCode({verifyCode:i.verifyCode}).then(function(o){e.stopPullDownRefresh(),console.log("bingooooooooooooo",o),o.data.result?e.redirectTo({url:"/pages/login/login?type=rebind"}):t.showZanTopTips("验证码不正确")}).catch(function(o){return console.log(o)})}}))}),window.__swanRoute="pages/login/verify_cell",window.usingComponents=[],require("pages/login/verify_cell");