function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function _inherits(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}!function(global,san){function processTemplateModule(filterTemplateArrs,filterModule){eval(filterModule);var modules={},templateFiltersObj={};return filterTemplateArrs&&filterTemplateArrs.forEach(function(element){var filterName=element.filterName,func=element.func,module=element.module;modules[module]=eval(module),templateFiltersObj[filterName]=function(){var e;return(e=modules[module])[func].apply(e,arguments)}}),templateFiltersObj}global.errorMsg=[];var filterTemplateArrs0=JSON.parse("[]"),templateFiltersObj0={};filterTemplateArrs0.length&&(templateFiltersObj0=processTemplateModule(filterTemplateArrs0,""));var template7e2351=san.defineComponent({components:PageComponent.components,template:'<swan-template data-origin-name="zan-toast"><text class="zan-toast" s-if=" zanToast.show " style="width:70%" on-bindtap="eventHappen(\'tap\', $event, \'clearZanToast\', \'\', \'bind\')">{{ zanToast.title }}</text></swan-template>',filters:Object.assign({},templateFiltersObj0),inited:function(){var e=this,n=function(n){for(var o in n)e.data.set(o,n[o])};n(this.data.get("data")),this.watch("data",n)},eventHappen:function(){var e;(e=this.owner).eventHappen.apply(e,arguments)}});PageComponent.components["template-7e2351"]=template7e2351;var templateComponents=Object.assign({},{"template-7e2351":template7e2351}),param={},filterArr=JSON.parse("[]");try{filterArr&&filterArr.forEach(function(item){param[item.module]=eval(item.module)});var pageContent='<view class="container" style="background-color:#fff;width:100%;display:flex;flex-direction: column;align-items:center;justify-content:flex-start;padding-top: 2.933333333333333vw" s-if="isShow"><coupon type=\'type4\' coupon="{{ { startTime: coupondetail.useTime, endTime: coupondetail.useEndTime, rangeOfUse:coupondetail.rangeOfUse,useThreshold:coupondetail.useThreshold,value: coupondetail.value, overTime:coupondetail.overTime,termOfValidity: coupondetail.termOfValidity, status: coupondetail.status} }}" color="{{couponcolor}}" /><view style="margin-left:5.333333333333333vw;align-self: flex-start;font-size:3.7333333333333334vw;text-align:left;margin-top: 10.666666666666666vw;color:#000">注意事项</view><view style="align-self: flex-start;font-size:3.2vw;text-align:left;margin: 2.6666666666666665vw 2.6666666666666665vw 2.6666666666666665vw 5.333333333333333vw;color:#000"><view >1、{{coupondetail.rangeOfUse == 1 ?\'全平台可以使用\' : \'限部分店铺使用\' }}\n          <text style="color: #ff5e5e;margin-left:2.6666666666666665vw;" on-bindtap="eventHappen(\'tap\', $event, \'showStoreList\', \'\', \'bind\')" s-if=" coupondetail.rangeOfUse !== 1 ">查看全部店铺></text></view><view >2、剩余{{coupondetail.stock}}张 {{coupondetail.limitNum == 0 ? \'\': \',每人限领\'+coupondetail.limitNum+\'张\' }}\n        </view></view><view style="margin:5.333333333333333vw 2.6666666666666665vw 2.6666666666666665vw 2.6666666666666665vw;width:100%" ontap="receiveCoupon" s-if="!isdetail"><button class="zan-btn zan-btn--danger" style="margin:3.2vw;font-size: 3.7333333333333334vw">领取优惠券</button></view></view><view class="zan-dialog {{ isShowStoreList ? \'zan-dialog--show\' : \'\' }}"><view class="zan-dialog__mask"><view class="storelist-wrap"><view class="storelist-wrap__title">店铺列表</view><scroll-view enable-back-to-top="" scroll-top="{{scrollTop}}" scroll-y="" style="width:100%;height:83.46666666666667vw;"><template s-for="item, index in coupondetail.stores"><view class="store-list"><image class="store-list__img" src="{{item.logo}}"></image><view ><view class="store-list__adress">{{item.storeName}}</view></view></view></template></scroll-view></view><view style="text-align:center"><image on-bindtap="eventHappen(\'tap\', $event, \'toggleStoreDialog\', \'\', \'bind\')" style="width:6.666666666666667vw;height:6.666666666666667vw" mode="scaleToFill" src="http://imgcdnali.wfenxiao.com.cn/xcx/c/close.png"></image></view></view></view><phonemodal show-modal="{{showModal}}" url="{{url}}"></phonemodal><template-7e2351 data="{{{ zanToast }}}" data-origin-name="zan-toast"></template-7e2351>',renderPage=function renderPage(filters,modules){var componentFactory=global.componentFactory,componentFragments=componentFactory.getAllComponents(),user_self_compo_934308=function(global,componentFragments){var templateComponents={},usingComponentMap=JSON.parse('{"phonebutton":"component/phonebutton/index","toast":"component/toast/index"}'),filterCustomArr=JSON.parse("[]"),modules={},filtersObj={};filterCustomArr&&filterCustomArr.forEach(function(element){modules[element.module]=eval(element.module);var func=element.func,module=element.module;filtersObj[element.filterName]=function(){var e;return(e=modules[module])[func].apply(e,arguments)}});var components=Object.assign({},componentFragments,templateComponents);return global.componentFactory.componentDefine("component/phonemodal/phonemodal.swan",Object.assign({},componentFactory.getProtos("super-custom-component"),{template:"<swan-phonemodal><view class=\"modal-wrap\" on-bindtap=\"eventHappen('tap', $event, 'onCancel', '', 'bind')\" style=\"display: {{ show ? 'block': 'none' }}\"><view class=\"modal-container\"><view class=\"modal-header\">{{title}}</view><view class=\"modal-body\">更多服务登陆后即可体验</view><view class=\"modal-footer\"><phonebutton class=\"modal-footer\" loginUrl=\"{{loginUrl}}\" on-bindchangeuser=\"eventHappen('changeuser', $event, 'changeuser', '', 'bind')\" on-bindshowtoast=\"eventHappen('showtoast', $event, 'showtoast', '', 'bind')\"></phonebutton></view></view></view><toast show=\"{{toast.show}}\" title=\"{{toast.title}}\" /></swan-phonemodal>",componentPath:"component/phonemodal/phonemodal.swan",componentName:"phonemodal",customComponentCss:"/* component/phonemodal/phonemodal.css */\n\n\n.phonemodal__modal-wrap{\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0,0,0,0.3);\n  position: fixed;\n  z-index: 1000;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n}\n\n\n.phonemodal__modal-container{\n  position: absolute;\n  height: 46.13333333333333vw;\n  width: 73.6vw;\n  z-index: 9999;\n  border-radius: 2.1333333333333333vw;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  margin: auto;\n  background-color: #fff;\n}\n\n\n.phonemodal__modal-header{\n  text-align: center;\n  font-size: 4.266666666666667vw;\n  margin: 4.266666666666667vw 0 6.4vw 0;\n}\n\n\n.phonemodal__modal-body{\n  font-size: 3.7333333333333334vw;\n  color: #000;\n  opacity: 0.43;\n  margin-bottom: 9.066666666666666vw;\n  text-align: center;\n}\n\n\n.phonemodal__modal-footer{\n  display: flex;\n  justify-content: center;\n}\n"}),{classProperties:{components:components,filters:Object.assign({},filtersObj)}}),Promise.resolve().then(function(){for(var e in usingComponentMap)components[e]=customAbsolutePathMap[usingComponentMap[e]]}),global.componentFactory.getComponents("component/phonemodal/phonemodal.swan")}(global,componentFragments),user_self_compo_934309=function(global,componentFragments){var templateComponents={},usingComponentMap=JSON.parse("{}"),filterCustomArr=JSON.parse("[]"),modules={},filtersObj={};filterCustomArr&&filterCustomArr.forEach(function(element){modules[element.module]=eval(element.module);var func=element.func,module=element.module;filtersObj[element.filterName]=function(){var e;return(e=modules[module])[func].apply(e,arguments)}});var components=Object.assign({},componentFragments,templateComponents);return global.componentFactory.componentDefine("component/coupon/index.swan",Object.assign({},componentFactory.getProtos("super-custom-component"),{template:'<swan-coupon><view s-if=" type == \'type1\' "><view class="common-content type1-content" style="border-top-color: {{ color || \'#fb355c\' }}" on-bindtap="eventHappen(\'tap\', $event, \'bindCoupon\', \'\', \'bind\')" data-coupon="{{ coupon }}"><view class="common-money type1-money" style="color: {{ color || \'#fb355c\' }}"><text style="font-size: 4.266666666666667vw;">￥</text>{{coupon.value}}</view><view class="type1-limit"><view style="font-size: 3.7333333333333334vw;color:#000;">{{ coupon.useThreshold == 0? \'无门槛使用\': "满"+coupon.useThreshold+"元使用" }}</view><view style="margin: 1.0666666666666667vw 0;">{{coupon.rangeOfUse == 1 ? \'全平台可用\' : \'部分店铺可用\' }}</view><view style="white-space: nowrap;">{{ coupon.status == 2 ? \'领取后\'+coupon.termOfValidity+\'天内有效\': \'有效期\'+coupon.useTime+\'~\'+coupon.useEndTime }}</view></view><view class="common-button type1-button" style="background-color: {{ color || \'#fb355c\' }}">立即领取</view></view></view><view s-if=" type == \'type2\' "><view class="common-content type2-content" style="border-top-color: {{ color || \'#fb355c\' }}" on-bindtap="eventHappen(\'tap\', $event, \'bindCoupon\', \'\', \'bind\')" data-coupon="{{ coupon }}"><view class="type2-limit"><view class="common-money type2-money" style="color: {{ color || \'#fb355c\' }}"><text style="font-size: 4.266666666666667vw;">￥</text>{{coupon.value}}</view><view class="type2-limit_info"><view style="font-size: 3.2vw;color:#000;">{{ coupon.useThreshold == 0? \'无门槛使用\': "满"+coupon.useThreshold+"元使用" }}</view><view style="margin-top: 1.0666666666666667vw;">{{coupon.rangeOfUse == 1 ? \'全平台可用\' : \'部分店铺可用\' }}</view></view></view><view ><view class="common-button" style="background-color: {{ color || \'#fb355c\' }}">立即领取</view></view></view></view><view s-if=" type == \'type3\' "><view class="common-content type3-content" style="border-top-color: {{ color || \'#fb355c\' }}" on-bindtap="eventHappen(\'tap\', $event, \'bindCoupon\', \'\', \'bind\')" data-coupon="{{ coupon }}"><view class="type3-limit"><view class="common-money type3-money" style="color: {{ color || \'#fb355c\' }}"><text style="font-size: 3.2vw;">￥</text>{{coupon.value}}</view><view class="type3-button" style="background-color: {{ color || \'#fb355c\' }}">领</view></view><view style="font-size: 2.6666666666666665vw;color:#000;">{{ coupon.useThreshold == 0? \'无门槛使用\': "满"+coupon.useThreshold+"元使用" }}</view><view style="font-size: 2.4vw;color: #9B9B9B ;margin: 0.4vw 0;">{{coupon.rangeOfUse == 1 ? \'全平台可用\' : \'部分店铺可用\' }}</view></view></view><view s-if=" type == \'type4\' "><view class="common-content type1-content " style="border-top-color: {{ coupon.overTime ? \'#CDCDCD\' : \'#fb355c\' }}"><view class="common-money type1-money" style="color: {{ coupon.overTime ? \'#CDCDCD\' : \'#fb355c\' }}"><text style="font-size: 4.266666666666667vw;">￥</text>{{coupon.value}}</view><view class="type1-limit {{ coupon.overTime ? \'type4-limit\' : \'\' }}"><view style="font-size: 3.7333333333333334vw;color: {{ coupon.overTime ? \'#9B9B9B\' : \'#000\' }};">{{ coupon.useThreshold == 0? \'无门槛使用\': "满"+coupon.useThreshold+"元使用" }}</view><view style="margin: 1.0666666666666667vw 0;">{{coupon.rangeOfUse == 1 ? \'全平台可用\' : \'部分店铺可用\' }}</view><view style="white-space: nowrap;">{{ coupon.status == 2 ? \'领取后\'+coupon.termOfValidity+\'天内有效\': \'有效期\'+coupon.startTime+\'~\'+coupon.endTime }}</view></view><view s-if=" coupon.overTime " class="coupon4-button"><view class="coupon4-overTime">已过期</view></view></view></view><view s-if=" type == \'type5\' "><view class="common-content type1-content" style="border-top-color: {{ coupon.stock>0 ?  \'#fb355c\' : \'#CDCDCD\' }}"><view class="common-money type1-money" style="color: {{ coupon.stock>0 ? \'#fb355c\' : \'#CDCDCD\' }}"><text style="font-size: 4.266666666666667vw;">￥</text>{{coupon.value}}</view><view class="type1-limit {{ coupon.stock>0 ? \'\' : \'type4-limit\' }}"><view style="font-size: 3.7333333333333334vw;color:#000;">{{ coupon.useThreshold == 0? \'无门槛使用\': "满"+coupon.useThreshold+"元使用" }}</view><view style="margin: 1.0666666666666667vw 0;">{{coupon.rangeOfUse == 1 ? \'全平台可用\' : \'部分店铺可用\' }}</view><view style="white-space: nowrap;">{{ coupon.status == 2 ? \'领取后\'+coupon.termOfValidity+\'天内有效\': \'有效期\'+coupon.useTime+\'~\'+coupon.useEndTime }}</view></view><view class="common-button type1-button" style="background-color: {{ coupon.stock>0 ?  \'#fb355c\' : \'#CDCDCD\' }}">{{ coupon.stock>0 ? \'立即领取\':\'已抢完\' }}</view></view></view></swan-coupon>',componentPath:"component/coupon/index.swan",componentName:"coupon",customComponentCss:"/* component/coupon/index.css */\n.coupon__common-content{\n  position: relative;\n  background-color: #fff;\n  display: flex;\n  box-sizing: border-box;\n  border: 0.13333333333333333vw solid #E7E7E7;\n  border-top: 1.3333333333333333vw solid #EE4949;\n  border-radius: 1.3333333333333333vw;\n  overflow:visible;\n  align-items: center;\n}\n.coupon__common-content::before{\n  position:absolute;\n  top: 50%;\n  margin-top: -1.6vw;\n  left: -0.26666666666666666vw;\n  display: inline-block;\n  width:1.6vw;\n  height:3.2vw;\n  background:#fff;\n  content:'';\n  border: 0.13333333333333333vw solid #E7E7E7;\n  border-left: 0;\n  border-radius:0 1.6vw 1.6vw 0;\n}\n.coupon__common-content::after{\n  position:absolute;\n  top: 50%;\n  right: -0.26666666666666666vw;\n  margin-top: -1.6vw;z\n  display: inline-block;\n  width:1.6vw;\n  height:3.2vw;\n  background:#fff;\n  content:'';\n  border: 0.13333333333333333vw solid #E7E7E7;\n  border-right: 0;\n  border-radius:1.6vw 0vw 0vw 1.6vw;\n}\n.coupon__common-button{\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 17.066666666666666vw;\n  height:5.333333333333333vw;\n  background-color: #EE4949;\n  border-radius: 2.6666666666666665vw;\n  color: #fff;\n  font-size: 2.6666666666666665vw;\n}\n.coupon__common-money{\n  font-size: 8.533333333333333vw;\n  color: #EE4949;\n}\n.coupon__type1-content{\n  width: 91.73333333333333vw;\n  height: 25.6vw;\n}\n.coupon__type1-money{\n  margin-left: 2.6666666666666665vw;\n  width: 25.733333333333334vw;\n  white-space: nowrap;\n\n}\n.coupon__type1-limit{\n  flex: 1;\n  font-size: 2.933333333333333vw;\n  color: #9B9B9B;\n}\n.coupon__type1-button{\n  margin-right: 2.6666666666666665vw;\n}\n.coupon__type2-content{\n  width: 43.733333333333334vw;\n  height: 25.6vw;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.coupon__type2-limit{\n  display: flex;\n  margin: 2.6666666666666665vw 0 2.933333333333333vw;\n}\n.coupon__type2-limit_info{\n  font-size: 2.4vw;\n  color: #9B9B9B;\n}\n.coupon__type2-money{\n  margin-right: 1.0666666666666667vw;\n  text-align: left;\n  width:20vw;\n  font-size: 6.4vw;\n}\n.coupon__type3-content{\n  width: 29.333333333333332vw;\n  height: 20.8vw;\n  align-items:flex-start;\n  padding-left: 2.6666666666666665vw;\n  display: flex;\n  flex-direction: column;\n}\n.coupon__type3-limit{\n  display: flex;\n  align-items: center;\n  width: 100%;\n  margin: 1.3333333333333333vw 0 0vw;\n  justify-content: space-between;\n}\n.coupon__type3-money{\n  font-size: 5.6vw;\n\n}\n.coupon__type3-button{\n  margin-right: 3.466666666666667vw;\n  width: 6.4vw;\n  height: 6.4vw;\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 3.2vw;\n  color: #fff;\n  background-color: #EE4949;\n}\n.coupon__coupon4-button{\n  width: 14.933333333333334vw;\n  height: 14.933333333333334vw;\n  border: 0.5333333333333333vw solid #CDCDCD;\n  border-radius: 50%;\n  margin-right: 2.6666666666666665vw;\n  font-size: 3.2vw;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #CDCDCD;\n}\n.coupon__coupon4-overTime{\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width:12.266666666666667vw;\n  height: 12.266666666666667vw;\n  border: 0.13333333333333333vw #CDCDCD dotted;\n  border-radius: 50%;\n  transform:rotate(-40deg);\n}\n.coupon__type4-limit{\n  color: #CDCDCD;\n}\n"}),{classProperties:{components:components,filters:Object.assign({},filtersObj)}}),Promise.resolve().then(function(){for(var e in usingComponentMap)components[e]=customAbsolutePathMap[usingComponentMap[e]]}),global.componentFactory.getComponents("component/coupon/index.swan")}(global,componentFragments),user_self_compo_934310=function(global,componentFragments){var templateComponents={},usingComponentMap=JSON.parse('{"toast":"component/toast/index"}'),filterCustomArr=JSON.parse("[]"),modules={},filtersObj={};filterCustomArr&&filterCustomArr.forEach(function(element){modules[element.module]=eval(element.module);var func=element.func,module=element.module;filtersObj[element.filterName]=function(){var e;return(e=modules[module])[func].apply(e,arguments)}});var components=Object.assign({},componentFragments,templateComponents);return global.componentFactory.componentDefine("component/phonebutton/index.swan",Object.assign({},componentFactory.getProtos("super-custom-component"),{template:"<swan-phonebutton><view class=\"button-wrap\"><button on-bindtap=\"eventHappen('tap', $event, 'gotoLogin', '', 'catch')\" class=\"{{size == 'big'?'modal-btn-big':'modal-btn-primary'}}\">极速登录</button></view><toast show=\"{{toast.show}}\" title=\"{{toast.title}}\" /></swan-phonebutton>",componentPath:"component/phonebutton/index.swan",componentName:"phonebutton",customComponentCss:"/* component/phonebutton/index.css */\n.phonebutton__button-wrap{\n  display: flex;\n  justify-content: center;\n}\n.phonebutton__modal-btn-primary{\n  width: 29.333333333333332vw;\n  height: 8.533333333333333vw;\n  background: #f32828;\n  border-radius: 1.0666666666666667vw;\n  line-height: 8.533333333333333vw;\n  color: #fff;\n  font-size: 3.7333333333333334vw;\n}\n.phonebutton__modal-btn-big{\n  width:48vw;\n  height:11.733333333333333vw;\n  line-height:11.733333333333333vw;\n  background-color:#f22222;\n  border-color:#f22222;\n  font-size:3.7333333333333334vw;\n  color:#fff;\n\n}\n"}),{classProperties:{components:components,filters:Object.assign({},filtersObj)}}),Promise.resolve().then(function(){for(var e in usingComponentMap)components[e]=customAbsolutePathMap[usingComponentMap[e]]}),global.componentFactory.getComponents("component/phonebutton/index.swan")}(global,componentFragments),user_self_compo_934311=function(global,componentFragments){var templateComponents={},usingComponentMap=JSON.parse("{}"),filterCustomArr=JSON.parse("[]"),modules={},filtersObj={};filterCustomArr&&filterCustomArr.forEach(function(element){modules[element.module]=eval(element.module);var func=element.func,module=element.module;filtersObj[element.filterName]=function(){var e;return(e=modules[module])[func].apply(e,arguments)}});var components=Object.assign({},componentFragments,templateComponents);return global.componentFactory.componentDefine("component/toast/index.swan",Object.assign({},componentFactory.getProtos("super-custom-component"),{template:"<swan-toast><view class=\"toast\" s-if=\" show \" style=\"width:70%\" on-bindtap=\"eventHappen('tap', $event, 'clearToast', '', 'bind')\">{{ title }}</view></swan-toast>",componentPath:"component/toast/index.swan",componentName:"toast",customComponentCss:".toast__toast {\n  position: fixed;\n  top: 35%;\n  left: 15%;\n  transform: translateZ(0) translateY(-100%);\n  background: rgba(0, 0, 0, 0.7);\n  color: #fff;\n  font-size: 14px;\n  line-height: 1.5em;\n  margin: 0 auto;\n  box-sizing: border-box;\n  padding: 10px;\n  text-align: center;\n  border-radius: 4px;\n  z-index: 900;\n}\n"}),{classProperties:{components:components,filters:Object.assign({},filtersObj)}}),Promise.resolve().then(function(){for(var e in usingComponentMap)components[e]=customAbsolutePathMap[usingComponentMap[e]]}),global.componentFactory.getComponents("component/toast/index.swan")}(global,componentFragments),customAbsolutePathMap={"component/phonemodal/phonemodal":user_self_compo_934308,"component/coupon/index":user_self_compo_934309,"component/phonebutton/index":user_self_compo_934310,"component/toast/index":user_self_compo_934311},pageUsingComponentMap=JSON.parse('{"phonemodal":"component/phonemodal/phonemodal","coupon":"component/coupon/index"}'),customComponents=Object.keys(pageUsingComponentMap).reduce(function(e,n){return e[n]=customAbsolutePathMap[pageUsingComponentMap[n]],e},{});global.pageRender(pageContent,templateComponents,customComponents,filters,modules)},oldPatch=function(e){Object.assign(e.components,{"template-7e2351":template7e2351});var n=function(n){function o(n){_classCallCheck(this,o);var t=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,n));return t.components=e.components,t}return _inherits(o,n),o}(e);n.template='<swan-wrapper tabindex="-1">'+pageContent+"</swan-wrapper>";var o=new n;o.slaveLoaded(),o.communicator.onMessage("initData",function(e){o.setInitData(e),o.attach(document.body)},{listenPreviousEvent:!0})};global.pageRender?renderPage(filterArr,param):oldPatch(window.PageComponent)}catch(e){throw global.errorMsg.execError=e,e}}(window,window.san);