window.define("pages/coupons/receive_coupon/index",function(o,t,e,i,n,a,s,u,d,c,r,h,l,p,f,g){"use strict";function w(o){return o&&o.__esModule?o:{default:o}}var D=o("../../../network/api"),S=w(D),v=o("../../../dist/index"),_=w(v);Page(Object.assign({},_.default.Toast,{data:{},onLoad:function(o){var t=o.id;this.setData({id:t}),o.isdetail&&this.setData({isdetail:!0}),o.color&&this.setData({couponcolor:o.color})},onShow:function(){var o=this.data.id,t=this;n.showLoading({title:"加载中"}),setTimeout(function(){t.queryCouponDetail({id:o})},1e3);var e=n.getStorageSync("userinfo");this.setData({userinfo:e})},receiveCoupon:function(o){var t=this,e=n.getStorageSync("userinfo");this.setData({userinfo:e}),e.mobile?(n.showLoading({title:"加载中"}),S.default.receiveCoupon({id:this.data.id}).then(function(o){n.hideLoading(),t.showZanToast("领取成功"),t.queryCouponDetail({id:t.data.id})}).catch(function(o){n.hideLoading(),t.showZanToast(S.default.errors(o.error)||"网络链接错误")})):this.setData({showModal:!0,url:"/pages/login/login"})},queryCouponDetail:function(o){var t=this;S.default.queryCouponDetail(o).then(function(o){n.hideLoading(),t.setData({coupondetail:o.data,isShow:!0}),console.log(o,"+_+_+_+_")}).catch(function(o){return console.log(o,"++++++++++++")})},showToast:function(o){this.showZanToast(o)},showStoreList:function(){this.setData({isShowStoreList:!0})},toggleStoreDialog:function(){this.setData({isShowStoreList:!1})}}))}),window.__swanRoute="pages/coupons/receive_coupon/index",window.usingComponents=["component/phonemodal/phonemodal","component/coupon/index"],require("pages/coupons/receive_coupon/index");